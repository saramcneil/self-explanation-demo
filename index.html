<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Explanation with AI Feedback Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            background: #f3f4f6;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            padding: 30px;
        }
        h1 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #6b7280;
            margin-bottom: 30px;
        }
        .progress-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 40px;
        }
        .progress-step {
            display: flex;
            align-items: center;
        }
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .step-circle.active {
            background: #2563eb;
            color: white;
        }
        .step-circle.inactive {
            background: #e5e7eb;
            color: #6b7280;
        }
        .step-line {
            width: 50px;
            height: 4px;
            margin: 0 5px;
        }
        .step-line.active {
            background: #2563eb;
        }
        .step-line.inactive {
            background: #e5e7eb;
        }
        .step-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 10px;
        }
        .content-box {
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
            min-height: 400px;
        }
        .content-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .content-header h2 {
            font-size: 1.5rem;
            color: #1f2937;
        }
        .content-text {
            font-size: 1.125rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        .mechanism-box {
            background: #eff6ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .mechanism-item {
            margin-bottom: 15px;
        }
        .mechanism-item:last-child {
            margin-bottom: 0;
        }
        .diagram {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
        }
        .prompt-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            margin-bottom: 20px;
        }
        .prompt-box p:first-child {
            font-weight: 600;
            font-size: 1.125rem;
            margin-bottom: 10px;
        }
        textarea {
            width: 100%;
            min-height: 160px;
            padding: 15px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
        }
        textarea:focus {
            outline: none;
            border-color: #2563eb;
        }
        .response-box {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #d1d5db;
        }
        .response-label {
            font-weight: 600;
            color: #6b7280;
            margin-bottom: 10px;
        }
        .response-text {
            color: #1f2937;
            line-height: 1.75;
        }
        .feedback-box {
            background: #f0fdf4;
            border-left: 4px solid #22c55e;
            padding: 20px;
            border-radius: 8px;
        }
        .feedback-header {
            font-weight: 600;
            color: #166534;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        .feedback-item {
            margin-bottom: 15px;
            color: #1f2937;
            line-height: 1.7;
        }
        .feedback-item:last-child {
            margin-bottom: 0;
        }
        .feedback-label {
            font-weight: 600;
        }
        .feedback-label.strength {
            color: #15803d;
        }
        .feedback-label.develop {
            color: #ea580c;
        }
        .feedback-label.question {
            color: #2563eb;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-reset {
            background: none;
            color: #6b7280;
        }
        .btn-reset:hover {
            color: #1f2937;
        }
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        .btn-primary:hover {
            background: #1d4ed8;
        }
        .btn-success {
            background: #16a34a;
            color: white;
        }
        .btn-success:hover {
            background: #15803d;
        }
        .info-box {
            margin-top: 30px;
            padding: 20px;
            background: #eff6ff;
            border-radius: 8px;
            border: 1px solid #bfdbfe;
        }
        .info-box p {
            font-size: 0.875rem;
            color: #374151;
            line-height: 1.6;
        }
        .hidden {
            display: none;
        }
        svg {
            width: 100%;
            max-width: 600px;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Self-Explanation with AI Feedback Demo</h1>
        <p class="subtitle">Renal Acid-Base Physiology Learning Module</p>

        <!-- Progress Bar -->
        <div class="progress-bar" id="progressBar"></div>
        <div class="step-labels">
            <span>Content</span>
            <span>Prompt</span>
            <span>Response</span>
            <span>Feedback</span>
        </div>

        <!-- Content Box -->
        <div class="content-box" id="contentBox"></div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="btn-reset" onclick="resetDemo()">← Start Over</button>
            <button class="btn-primary" id="nextBtn" onclick="nextStep()">Continue →</button>
        </div>

        <!-- Info Box -->
        <div class="info-box">
            <p><strong>Research Design Note:</strong> In the actual study, participants in the 
            "Self-Explanation + AI Feedback" group will receive automated, personalized feedback 
            like shown above. The "Self-Explanation Only" group will answer prompts but receive 
            no feedback. The "Control" group will study the content without prompts or feedback.</p>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 4;

        const steps = [
            {
                title: 'Buffer Systems in Acid-Base Balance',
                content: `
                    <div class="content-header">
                        <h2>Buffer Systems in Acid-Base Balance</h2>
                    </div>
                    <p class="content-text">
                        The body maintains blood pH within a narrow range (7.35-7.45) through three 
                        compensation mechanisms working together:
                    </p>
                    <div class="mechanism-box">
                        <div class="mechanism-item">
                            <strong style="color: #2563eb;">1. Buffer Systems:</strong>
                            Chemical buffers that immediately neutralize excess H+ or OH- ions
                        </div>
                        <div class="mechanism-item">
                            <strong style="color: #16a34a;">2. Respiratory Compensation:</strong>
                            Lungs adjust CO2 levels within minutes to hours
                        </div>
                        <div class="mechanism-item">
                            <strong style="color: #9333ea;">3. Renal Compensation:</strong>
                            Kidneys adjust bicarbonate reabsorption over hours to days
                        </div>
                    </div>
                    <div class="diagram">
                        <svg viewBox="0 0 600 250">
                            <rect width="600" height="250" fill="#f8f9fa"/>
                            <text x="300" y="80" text-anchor="middle" font-size="18" font-weight="bold" fill="#374151">pH Scale 7.35 - 7.45</text>
                            <rect x="200" y="100" width="200" height="30" fill="#2563eb" opacity="0.3" rx="5"/>
                            <text x="300" y="120" text-anchor="middle" font-size="14" fill="#1e40af">Normal Range</text>
                            <text x="50" y="170" font-size="14" font-weight="bold" fill="#2563eb">Buffer (Immediate)</text>
                            <text x="50" y="195" font-size="14" font-weight="bold" fill="#16a34a">Respiratory (Min-Hr)</text>
                            <text x="50" y="220" font-size="14" font-weight="bold" fill="#9333ea">Renal (Hr-Days)</text>
                        </svg>
                    </div>
                `
            },
            {
                title: 'Self-Explanation Prompt',
                content: `
                    <div class="content-header">
                        <h2>Self-Explanation Prompt</h2>
                    </div>
                    <div class="prompt-box">
                        <p>Please explain in your own words:</p>
                        <p>How do these three compensation mechanisms work together to maintain blood pH? 
                        Explain the relationships between pH, CO2, and bicarbonate, and why the body 
                        needs multiple compensation systems.</p>
                    </div>
                    <textarea placeholder="Type your explanation here..." id="studentResponse"></textarea>
                `
            },
            {
                title: 'Student Response Example',
                content: `
                    <div class="content-header">
                        <h2>Student Response Example</h2>
                    </div>
                    <div class="response-box">
                        <div class="response-label">Student wrote:</div>
                        <div class="response-text">
                            "The buffer systems work by neutralizing acids and bases immediately when pH 
                            changes. The respiratory system can breathe faster or slower to get rid of CO2 
                            which affects pH. The kidneys can reabsorb bicarbonate to help maintain pH. 
                            They work at different speeds - buffers are immediate, breathing is faster, 
                            and kidneys take longer."
                        </div>
                    </div>
                `
            },
            {
                title: 'AI-Generated Feedback',
                content: `
                    <div class="content-header">
                        <h2>AI-Generated Feedback</h2>
                    </div>
                    <div class="feedback-box">
                        <div class="feedback-header">AI Feedback:</div>
                        <div class="feedback-item">
                            <span class="feedback-label strength">✓ Strengths:</span> You correctly 
                            identified all three compensation mechanisms and their relative time frames. 
                            Good recognition that buffers act immediately while renal compensation takes 
                            longer.
                        </div>
                        <div class="feedback-item">
                            <span class="feedback-label develop">→ Areas to develop:</span> Consider 
                            explaining <em>why</em> increasing ventilation removes CO2 and how this specifically 
                            affects blood pH through the equation: CO2 + H2O ↔ H2CO3 ↔ H+ + HCO3-. Also, try 
                            to explain the <em>relationship</em> between these mechanisms - how does the 
                            respiratory system's CO2 removal relate to the bicarbonate that kidneys manage?
                        </div>
                        <div class="feedback-item">
                            <span class="feedback-label question">? Think about:</span> Why does the 
                            body need multiple compensation systems working at different speeds? What would 
                            happen if we only had the buffer system or only had renal compensation?
                        </div>
                    </div>
                `
            }
        ];

        function renderProgressBar() {
            const progressBar = document.getElementById('progressBar');
            let html = '';
            
            for (let i = 0; i < totalSteps; i++) {
                const activeClass = i <= currentStep ? 'active' : 'inactive';
                html += `
                    <div class="progress-step">
                        <div class="step-circle ${activeClass}">${i + 1}</div>
                        ${i < totalSteps - 1 ? `<div class="step-line ${i < currentStep ? 'active' : 'inactive'}"></div>` : ''}
                    </div>
                `;
            }
            
            progressBar.innerHTML = html;
        }

        function renderContent() {
            const contentBox = document.getElementById('contentBox');
            contentBox.innerHTML = steps[currentStep].content;
            
            // Update button
            const nextBtn = document.getElementById('nextBtn');
            if (currentStep === totalSteps - 1) {
                nextBtn.innerHTML = 'Try Another Example';
                nextBtn.className = 'btn-success';
                nextBtn.onclick = resetDemo;
            } else {
                nextBtn.innerHTML = 'Continue →';
                nextBtn.className = 'btn-primary';
                nextBtn.onclick = nextStep;
            }
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                renderProgressBar();
                renderContent();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function resetDemo() {
            currentStep = 0;
            renderProgressBar();
            renderContent();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        renderProgressBar();
        renderContent();
    </script>
</body>
</html>
