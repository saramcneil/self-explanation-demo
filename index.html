<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Explanation with AI Feedback Demo</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: #f3f4f6;
        }
        * { box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        // Lucide React icons as inline SVG components
        const ChevronRight = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );
        
        const PlayCircle = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polygon points="10 8 16 12 10 16 10 8"></polygon>
            </svg>
        );
        
        const MessageSquare = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
        );
        
        const Brain = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
                <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
            </svg>
        );

        const MultimediaDemo = () => {
            const [currentStep, setCurrentStep] = useState(0);
            const [studentResponse, setStudentResponse] = useState('');

            const steps = [
                {
                    type: 'content',
                    title: 'Buffer Systems in Acid-Base Balance',
                    icon: PlayCircle,
                    content: (
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                            <p style={{ fontSize: '1.125rem' }}>
                                The body maintains blood pH within a narrow range (7.35-7.45) through three 
                                compensation mechanisms working together:
                            </p>
                            <div style={{ background: '#eff6ff', padding: '1rem', borderRadius: '0.5rem', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'flex-start' }}>
                                    <span style={{ fontWeight: 'bold', color: '#2563eb' }}>1. Buffer Systems:</span>
                                    <span>Chemical buffers that immediately neutralize excess H+ or OH- ions</span>
                                </div>
                                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'flex-start' }}>
                                    <span style={{ fontWeight: 'bold', color: '#16a34a' }}>2. Respiratory Compensation:</span>
                                    <span>Lungs adjust CO2 levels within minutes to hours</span>
                                </div>
                                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'flex-start' }}>
                                    <span style={{ fontWeight: 'bold', color: '#9333ea' }}>3. Renal Compensation:</span>
                                    <span>Kidneys adjust bicarbonate reabsorption over hours to days</span>
                                </div>
                            </div>
                            <div style={{ marginTop: '1rem', padding: '1rem', background: '#f9fafb', borderRadius: '0.5rem' }}>
                                <svg viewBox="0 0 600 250" style={{ width: '100%', height: 'auto' }}>
                                    <rect width="600" height="250" fill="#f8f9fa"/>
                                    <text x="300" y="80" textAnchor="middle" fontSize="18" fontWeight="bold" fill="#374151">pH Scale 7.35 - 7.45</text>
                                    <rect x="200" y="100" width="200" height="30" fill="#2563eb" opacity="0.3" rx="5"/>
                                    <text x="300" y="120" textAnchor="middle" fontSize="14" fill="#1e40af">Normal Range</text>
                                    <text x="50" y="170" fontSize="14" fontWeight="bold" fill="#2563eb">Buffer (Immediate)</text>
                                    <text x="50" y="195" fontSize="14" fontWeight="bold" fill="#16a34a">Respiratory (Min-Hr)</text>
                                    <text x="50" y="220" fontSize="14" fontWeight="bold" fill="#9333ea">Renal (Hr-Days)</text>
                                </svg>
                            </div>
                        </div>
                    )
                },
                {
                    type: 'prompt',
                    title: 'Self-Explanation Prompt',
                    icon: MessageSquare,
                    content: (
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
                            <div style={{ background: '#fef3c7', borderLeft: '4px solid #f59e0b', padding: '1rem' }}>
                                <p style={{ fontWeight: '600', fontSize: '1.125rem', marginBottom: '0.5rem' }}>Please explain in your own words:</p>
                                <p style={{ color: '#374151' }}>
                                    How do these three compensation mechanisms work together to maintain blood pH? 
                                    Explain the relationships between pH, CO2, and bicarbonate, and why the body 
                                    needs multiple compensation systems.
                                </p>
                            </div>
                            <textarea
                                style={{
                                    width: '100%',
                                    height: '160px',
                                    padding: '1rem',
                                    border: '2px solid #d1d5db',
                                    borderRadius: '0.5rem',
                                    fontSize: '1rem',
                                    fontFamily: 'inherit'
                                }}
                                placeholder="Type your explanation here..."
                                value={studentResponse}
                                onChange={(e) => setStudentResponse(e.target.value)}
                            />
                        </div>
                    )
                },
                {
                    type: 'response',
                    title: 'Student Response Example',
                    icon: MessageSquare,
                    content: (
                        <div>
                            <div style={{ background: '#f9fafb', padding: '1rem', borderRadius: '0.5rem', border: '2px solid #d1d5db' }}>
                                <p style={{ fontWeight: '600', marginBottom: '0.5rem', color: '#6b7280' }}>Student wrote:</p>
                                <p style={{ color: '#1f2937', lineHeight: '1.75' }}>
                                    "The buffer systems work by neutralizing acids and bases immediately when pH 
                                    changes. The respiratory system can breathe faster or slower to get rid of CO2 
                                    which affects pH. The kidneys can reabsorb bicarbonate to help maintain pH. 
                                    They work at different speeds - buffers are immediate, breathing is faster, 
                                    and kidneys take longer."
                                </p>
                            </div>
                        </div>
                    )
                },
                {
                    type: 'feedback',
                    title: 'AI-Generated Feedback',
                    icon: Brain,
                    content: (
                        <div>
                            <div style={{ background: '#f0fdf4', borderLeft: '4px solid #22c55e', padding: '1rem', borderRadius: '0.5rem' }}>
                                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'flex-start' }}>
                                    <div style={{ color: '#16a34a', marginTop: '0.25rem', flexShrink: 0 }}>
                                        <Brain />
                                    </div>
                                    <div>
                                        <p style={{ fontWeight: '600', color: '#166534', marginBottom: '0.5rem' }}>AI Feedback:</p>
                                        <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem', color: '#1f2937' }}>
                                            <p>
                                                <span style={{ fontWeight: '600', color: '#15803d' }}>✓ Strengths:</span> You correctly 
                                                identified all three compensation mechanisms and their relative time frames. 
                                                Good recognition that buffers act immediately while renal compensation takes 
                                                longer.
                                            </p>
                                            <p>
                                                <span style={{ fontWeight: '600', color: '#ea580c' }}>→ Areas to develop:</span> Consider 
                                                explaining <em>why</em> increasing ventilation removes CO2 and how this specifically 
                                                affects blood pH through the equation: CO2 + H2O ↔ H2CO3 ↔ H+ + HCO3-. Also, try 
                                                to explain the <em>relationship</em> between these mechanisms - how does the 
                                                respiratory system's CO2 removal relate to the bicarbonate that kidneys manage?
                                            </p>
                                            <p>
                                                <span style={{ fontWeight: '600', color: '#2563eb' }}>? Think about:</span> Why does the 
                                                body need multiple compensation systems working at different speeds? What would 
                                                happen if we only had the buffer system or only had renal compensation?
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )
                }
            ];

            const handleNext = () => {
                if (currentStep < steps.length - 1) {
                    setCurrentStep(currentStep + 1);
                }
            };

            const handleReset = () => {
                setCurrentStep(0);
                setStudentResponse('');
            };

            return (
                <div style={{ maxWidth: '56rem', margin: '0 auto', padding: '1.5rem', background: 'white', minHeight: '100vh' }}>
                    <div style={{ marginBottom: '1.5rem' }}>
                        <h1 style={{ fontSize: '1.875rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '0.5rem' }}>
                            Self-Explanation with AI Feedback Demo
                        </h1>
                        <p style={{ color: '#6b7280' }}>
                            Renal Acid-Base Physiology Learning Module
                        </p>
                    </div>

                    {/* Progress Indicator */}
                    <div style={{ marginBottom: '2rem' }}>
                        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '0.5rem' }}>
                            {['Content', 'Prompt', 'Response', 'AI Feedback'].map((label, idx) => (
                                <div key={idx} style={{ display: 'flex', alignItems: 'center' }}>
                                    <div style={{
                                        width: '2.5rem',
                                        height: '2.5rem',
                                        borderRadius: '50%',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        fontWeight: '600',
                                        background: idx <= currentStep ? '#2563eb' : '#e5e7eb',
                                        color: idx <= currentStep ? 'white' : '#6b7280'
                                    }}>
                                        {idx + 1}
                                    </div>
                                    {idx < 3 && (
                                        <div style={{
                                            width: '3rem',
                                            height: '0.25rem',
                                            margin: '0 0.25rem',
                                            background: idx < currentStep ? '#2563eb' : '#e5e7eb'
                                        }} />
                                    )}
                                </div>
                            ))}
                        </div>
                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '0.875rem', color: '#6b7280', marginTop: '0.5rem' }}>
                            <span>Content</span>
                            <span>Prompt</span>
                            <span>Response</span>
                            <span>Feedback</span>
                        </div>
                    </div>

                    {/* Current Step Content */}
                    <div style={{ background: 'white', borderRadius: '0.5rem', boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)', padding: '1.5rem', marginBottom: '1.5rem', minHeight: '24rem' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '1rem' }}>
                            <steps[currentStep].icon />
                            <h2 style={{ fontSize: '1.5rem', fontWeight: '600', color: '#1f2937', margin: 0 }}>
                                {steps[currentStep].title}
                            </h2>
                        </div>
                        {steps[currentStep].content}
                    </div>

                    {/* Navigation */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <button
                            onClick={handleReset}
                            style={{
                                padding: '0.5rem 1.5rem',
                                color: '#6b7280',
                                background: 'none',
                                border: 'none',
                                fontWeight: '600',
                                cursor: 'pointer',
                                fontSize: '1rem'
                            }}
                        >
                            ← Start Over
                        </button>
                        {currentStep < steps.length - 1 ? (
                            <button
                                onClick={handleNext}
                                style={{
                                    padding: '0.75rem 1.5rem',
                                    background: '#2563eb',
                                    color: 'white',
                                    borderRadius: '0.5rem',
                                    border: 'none',
                                    fontWeight: '600',
                                    cursor: 'pointer',
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: '0.5rem',
                                    fontSize: '1rem'
                                }}
                            >
                                Continue
                                <ChevronRight />
                            </button>
                        ) : (
                            <button
                                onClick={handleReset}
                                style={{
                                    padding: '0.75rem 1.5rem',
                                    background: '#16a34a',
                                    color: 'white',
                                    borderRadius: '0.5rem',
                                    border: 'none',
                                    fontWeight: '600',
                                    cursor: 'pointer',
                                    fontSize: '1rem'
                                }}
                            >
                                Try Another Example
                            </button>
                        )}
                    </div>

                    {/* Information Box */}
                    <div style={{ marginTop: '2rem', padding: '1rem', background: '#eff6ff', borderRadius: '0.5rem', border: '1px solid #bfdbfe' }}>
                        <p style={{ fontSize: '0.875rem', color: '#374151', margin: 0 }}>
                            <strong>Research Design Note:</strong> In the actual study, participants in the 
                            "Self-Explanation + AI Feedback" group will receive automated, personalized feedback 
                            like shown above. The "Self-Explanation Only" group will answer prompts but receive 
                            no feedback. The "Control" group will study the content without prompts or feedback.
                        </p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MultimediaDemo />, document.getElementById('root'));
    </script>
</body>
</html>
